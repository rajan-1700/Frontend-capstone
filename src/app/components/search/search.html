<!-- <div class="container mt-4"> -->
  <!-- Search Input -->
  <!-- <input type="text"
         [(ngModel)]="query"
         (ngModelChange)="onQueryChange()"
         class="form-control mb-3"
         placeholder="Search for an author...">


 <div *ngIf="results.length" class="mb-5">
    <h4 class="mb-3">Author Results</h4>
    <ul class="list-group">
      <li
        *ngFor="let author of results"
        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center hover-card"
        (click)="viewWorks(author.key)"
        style="cursor: pointer;"
      >
        <span>
          <strong>{{ author.name }}</strong>
          <small class="text-muted ms-2">Born: {{ author.birth_date || 'Unknown' }}</small>
        </span>
        <span class="badge bg-primary">{{ author.work_count }} works</span>
      </li>
    </ul>
  </div>


<div class="mt-5">
  <h4>Search Book by ID</h4>
  <input #bookIdInput type="text" placeholder="Enter Book ID" class="form-control w-50 mb-3" />
  <button (click)="searchBook(bookIdInput.value)" class="btn btn-navy">Search</button>

  <div *ngIf="bookData" class="mt-4 card p-3 shadow">
    <h5>{{ bookData.title }}</h5>


    <p><b>Author:</b> {{ bookData.authorNames?.length ? bookData.authorNames.join(', ') : 'Unknown' }}</p>

    <p><b>Publish Date:</b> {{ bookData.publish_date || 'N/A' }}</p>


    <p><b>Language:</b> {{ bookData.languageNames?.join(', ') || 'N/A' }}</p>

    Add to Favourite button
   <button  class="btn btn-success mt-3">
  ‚ù§Ô∏è Add to Favourites
</button>
  </div>
</div>



<div *ngIf="popularBooks.length">
    <h4 class="mb-3">:fire: Trending Books</h4>
    <div class="row g-4">
      <div class="col-6 col-md-4 col-lg-2" *ngFor="let book of popularBooks">
        <div class="card book-card h-100 shadow-sm">
          <div class="position-relative" style="height: 170px; overflow: hidden;">
            <img
              *ngIf="!imageErrorMap[book.key || book.title]"
              [src]="getCoverImage(book)"
              (error)="onImageError(book.key || book.title)"
              class="card-img-top book-cover"
              alt="Book Cover"
            />
            <div
              *ngIf="imageErrorMap[book.key || book.title]"
              class="fallback-image d-flex align-items-center justify-content-center text-white text-center px-2"
              [style.background]="fallbackColors[getColorIndex(book.title || 'a')]"
              [style.fontFamily]="fallbackFonts[getFontIndex(book.title || 'a')]"
              style="height: 170px;"
            >
              <strong>{{ book.title }}</strong>
            </div>
          </div>
          <div class="card-body text-center p-2">
            <h6 class="card-title mb-1" style="font-size: 0.9rem;">{{ book.title }}</h6>
            <p class="text-muted xsmall mb-2">
              {{ book.authors?.[0]?.name || 'Unknown Author' }}
            </p>
            <button
              class="btn btn-sm btn-outline-primary"

            >
              <i class="bi bi-heart"></i> Favourite
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>










 -->




<!--
 <div #authorWorksSection *ngIf="works.length" class="mt-5 pt-4 border-top">
    <h4 class="mb-4 text-primary">: Books by {{ selectedAuthorName }}</h4>
    <div class="row g-4">
      <div class="col-6 col-md-4 col-lg-2" *ngFor="let book of works">
        <div class="card book-card h-100 shadow-sm">
          <div class="position-relative" style="height: 170px; overflow: hidden;">
            <img
              *ngIf="!imageErrorMap[book.key || book.title]"
              [src]="getCoverImage(book)"
              (error)="onImageError(book.key || book.title)"
              class="card-img-top book-cover"
              alt="Book Cover"
            />
            <div
              *ngIf="imageErrorMap[book.key || book.title]"
              class="fallback-image d-flex align-items-center justify-content-center text-white text-center px-2"
              [style.background]="fallbackColors[getColorIndex(book.title || 'a')]"
              [style.fontFamily]="fallbackFonts[getFontIndex(book.title || 'a')]"
              style="height: 170px;"
            >
              <strong>{{ book.title }}</strong>
            </div>
          </div>
          <div class="card-body text-center p-2">
            <h6 class="card-title mb-1" style="font-size: 0.9rem;">{{ book.title }}</h6>
            <button
              class="btn btn-sm btn-outline-primary"

            >
              <i class="bi bi-heart"></i> Favourite
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

 -->



  <!-- -------- -------------------------------------------------------------------------------->





<div class="container mt-4 page-wrap">
  <!-- Search Input -->
  <div class="mb-4">
    <input type="text"
           [(ngModel)]="query"
           (ngModelChange)="onQueryChange()"
           class="form-control form-control-lg shadow-sm"
           placeholder="Search for an author...">
  </div>



  <!-- Author Results -->
  <div *ngIf="results.length" class="mb-5">
    <h4 class="mb-3">Author Results</h4>
    <ul class="list-group">
      <li *ngFor="let author of results"
          class="list-group-item list-group-item-action d-flex justify-content-between align-items-center hover-card"
          (click)="viewWorks(author.key)">
        <span>
          <strong>{{ author.name }}</strong>
          <small class="text-muted ms-2">Birth: {{ author.birth_date || 'Unknown' }}</small>
        </span>
        <span class="badge bg-navy">{{ author.work_count }} works</span>
      </li>
    </ul>
  </div>


<div class="mt-5">
  <h4>Search Book by ID</h4>
  <input #bookIdInput type="text" placeholder="Enter Book ID" class="form-control w-50 mb-3" />
  <button (click)="searchBook(bookIdInput.value)" class="btn btn-search">
  üîç Search
</button>

  <div *ngIf="bookData" class="mt-4 card p-3 shadow">
    <h5>{{ bookData.title }}</h5>


    <p><b>Author:</b> {{ bookData.authorNames?.length ? bookData.authorNames.join(', ') : 'Unknown' }}</p>

    <p><b>Publish Date:</b> {{ bookData.publish_date || 'N/A' }}</p>


    <p><b>Language:</b> {{ bookData.languageNames?.join(', ') || 'N/A' }}</p>

    Add to Favourite button
   <button  class="btn btn-success mt-3">
  ‚ù§Ô∏è Add to Favourites
</button>
  </div>
</div>


<!-- Trending Books -->
<div class="mb-5" *ngIf="popularBooks.length">
  <h4 class="mb-3">Trending Books</h4>
  <div class="row g-3">
    <div class="col-6 col-md-4 col-lg-2" *ngFor="let book of popularBooks">
      <div class="card book-card shadow-sm">
        <div class="card-img-top-wrapper" style="position: relative; height: 180px; overflow: hidden;">
          <img *ngIf="!imageErrorMap[book.key || book.title]"
               [src]="getCoverImage(book)"
               class="card-cover"
               alt="Book Cover"
               (error)="onImageError(book.key || book.title)">
          <div *ngIf="imageErrorMap[book.key || book.title]"
               class="fallback-image d-flex align-items-center justify-content-center"
               [style.background]="fallbackColors[getColorIndex(book.title || 'a')]"
               [style.fontFamily]="fallbackFonts[getFontIndex(book.title || 'a')]">
            <span class="fallback-title text-center px-2">{{ book.title }}</span>
          </div>
        </div>
        <div class="card-body p-2 d-flex flex-column justify-content-between">
          <h6 class="card-title mb-1" [style.fontSize.px]="14" [style.fontFamily]="fallbackFonts[getFontIndex(book.title || 'a')]">{{ book.title }}</h6>
          <small class="text-muted">{{ book.authors?.[0]?.name }}</small>
<button class="btn btn-sm btn-outline-primary d-flex align-items-center gap-1" (click)="toggleFavourite(book)">
  <i class="bi"
     [ngClass]="isFavourite(book) ? 'bi-heart-fill text-danger' : 'bi-heart'"></i>
  Add to Favourites
</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Author Works -->
<div #authorWorksSection *ngIf="works.length" class="mt-5 pt-4 border-top">
  <h4 class="mb-4 text-navy">:books: Books by {{ selectedAuthorName }}</h4>
  <div class="row g-3">
    <div class="col-6 col-md-4 col-lg-2" *ngFor="let book of works">
      <div class="card book-card shadow-sm">
        <div class="card-img-top-wrapper" style="position: relative; height: 180px; overflow: hidden;">
          <img *ngIf="!imageErrorMap[book.key || book.title]"
               [src]="getCoverImage(book)"
               class="card-cover"
               alt="Book Cover"
               (error)="onImageError(book.key || book.title)">
          <div *ngIf="imageErrorMap[book.key || book.title]"
               class="fallback-image d-flex align-items-center justify-content-center"
               [style.background]="fallbackColors[getColorIndex(book.title || 'a')]"
               [style.fontFamily]="fallbackFonts[getFontIndex(book.title || 'a')]">
            <span class="fallback-title text-center px-2">{{ book.title }}</span>
          </div>
        </div>
        <div class="card-body p-2 d-flex flex-column justify-content-between">
          <h6 class="card-title mb-1" [style.fontSize.px]="14" [style.fontFamily]="fallbackFonts[getFontIndex(book.title || 'a')]">{{ book.title }}</h6>
          <button
            class="btn btn-sm btn-outline-primary mt-2 d-flex align-items-center justify-content-center gap-1"
            (click)="toggleFavourite(book)">
            <i class="bi" [ngClass]="isFavourite(book) ? 'bi-heart-fill text-danger' : 'bi-heart'"></i>
            <span class="xsmall">Favourite</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
